# XSS & CSRF

****

## XSS 是什么？

***

> Cross Site Scripting

简单来说，就是尝试在目标网站上挂脚本，并使用该脚本达到某种目的。属于一种比较常规的攻击方式。

*** 

### 如何做？

***

XSS 最常见的，是通过在带有用户输入的功能上做尝试。


****

## XSS 的危害？

***

如果能够在对方网站上挂载一个 JavaScript 文件，想想我们能够做什么？

***

我们今天的任务，就是要尝试使用 XSS 攻击，来登录其他同学的页面，并发送一条消息：

> 我是____，我做到了！

****

## 准备工作

> 编程相关

***

### 读取 cookie

	var cookie = document.cookie;
	
***

### 写 cookie
	
	// 注意，document.cookie 是一个特殊定义过的 getter 和 setter
	document.cookie = '<key>=<value>';
	
***

如何用最少的代码发送一条请求到自己的服务器？

> 可以想想类似的服务如何来做。

***

发送一个图片请求（GET 请求）

***

	// javascript
	new Image().src = url;
	
****

## 思路

***

1. 一个能够 host 你的脚本，和一个能够接收数据的服务器，

2. 尝试提交数据来挂脚本，

3. 尝试用脚本来获取用户 cookie 并发送到自己的服务器，

4. 使用获取到的 cookie，尝试登录用户的账户

5. 开始干坏事 :p

****

# Let's move it!

****

## 如何预防？

****

## 技术角度

***

1. 关键 cookie 使用 httponly（保护登录信息）
2. 重要业务，不要仅依赖 cookie（多重保障）
	- 重要流程，需要重新输入密码
	- 与 session 配合
	
3. 过滤所有用户贡献的内容（根源杜绝）

****

## 产品角度

***

1. 不要用户觉得有“利”可图
2. 设计更安全的流程
3. 使用更多的纬度来保护用户设置























